<!DOCTYPE html>
<html>

<head>
    <title>App Status</title>
    <link href="https://fonts.googleapis.com/css?family=Nunito:200,300,400,600,700,900" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="container">
        <div class="row">
            <div class="col-md-4">
                <div class="card card-3">
                    <h3>App Status</h3>
                    <p>Learn how to easily customize and modify your apps design to fit your
                        brand across all mobile platform styles.</p>

                    <button class="notify-button" id="notify-button" style="display: none;"> Notify! </button>

                    <div>
                        <span id="status-l" class="status status-l" title="APP IS LIVE">
                            LIVE</span>
                        <span id="status-m" class="status status-m display-none" title="APP IS IN MAINTENANCE">
                            MAINTENANCE</span>
                        <span id="status-d" class="status status-d display-none" title="APP IS IN DEPLOYMENT">
                            DEPLOYMENT</span>
                        <div class="change-status" onclick="handleChangeStatusBtn()">
                            change</div>
                    </div>
                    <div class="btn-group">
                        <button class="status-l" title="MOVE TO LIVE" onClick="handleUpdateStatus('LIVE')">
                            LIVE</button>
                        <button class="status-m" title="MOVE TO MAINTENANCE"
                            onClick="handleUpdateStatus('MAINTENANCE')">
                            MAINTENANCE</button>
                        <button class=" status-d" title="MOVE TO DEPLOYMENT" onClick="handleUpdateStatus('DEPLOYMENT')">
                            DEPLOYMENT</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src=" popup.js"></script>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-analytics.js";
        import { getFirestore, collection, doc, getDocs, setDoc, getDoc } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore.js";

        const data = new Promise((resolve, reject) => {
            fetch('./firebaseConfig.json')
                .then(respond => {
                    resolve(respond.json())
                }).catch(err => {
                    reject(err)
                })
        })

        data.then(firebaseConfig => {

            console.log("firebaseConfig:", firebaseConfig)


            // Import the functions you need from the SDKs you need

            // TODO: Add SDKs for Firebase products that you want to use
            // https://firebase.google.com/docs/web/setup#available-libraries

            // Your web app's Firebase configuration
            // For Firebase JS SDK v7.20.0 and later, measurementId is optional
            // const firebaseConfig = {
            //     apiKey: "AIzaSyBiOxbaEym5LYDz0sEhqsD1AJslrH8Tqig",
            //     authDomain: "app-status-checker-chrome-ext.firebaseapp.com",
            //     projectId: "app-status-checker-chrome-ext",
            //     storageBucket: "app-status-checker-chrome-ext.appspot.com",
            //     messagingSenderId: "984122762039",
            //     appId: "1:984122762039:web:1cff876f3de73c74a470b2",
            //     measurementId: "G-T8RSHBLGQ4"
            // };

            // Initialize Firebase
            const app = initializeApp(firebaseConfig);
            const analytics = getAnalytics(app);
            const db = getFirestore(app);

            async function getProjectStatus(db) {

                const docRef = doc(db, "company-one", "project-one");
                const docSnap = await getDoc(docRef);

                if (docSnap.exists()) {
                    const projectData = docSnap.data();
                    console.log("Document data:", projectData);
                } else {
                    // doc.data() will be undefined in this case
                    console.log("No such document!");
                }
            }
            getProjectStatus(db);
        }).catch(() => {
            alert("Please add the firebase config file. You can check the sample file")
        })

    </script>
    <script>
        function handleChangeStatusBtn() {


        }
    </script>
</body>

</html>